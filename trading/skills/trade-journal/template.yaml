# Trade Journal Template v2.1
# Output: knowledge/trades/{TICKER}_{YYYYMMDDTHHMM}.yaml
#
# CHANGELOG v2.1:
# - Added psychological_state section with detailed assessment
# - Added decision_quality section
# - Added pre_trade_checklist
# - Added real_time_notes array
# - Added loss_aversion_check for exits

_meta:
  id: "{TICKER}_{YYYYMMDDTHHMM}"
  type: trade-journal
  version: 2.1
  created: "{ISO_DATETIME}"
  status: "open|closed"

ticker: "{TICKER}"
direction: "long|short"

# ============================================================
# PRE-TRADE CHECKLIST - NEW v2.1
# ============================================================
pre_trade_checklist:
  analysis_completed: false
  analysis_file: ""
  do_nothing_gate_passed: false
  bias_check_completed: false
  position_size_calculated: false
  stop_loss_defined: false
  targets_defined: false
  risk_acceptable: false
  checklist_complete: false

# Entry
entry:
  date: "{YYYY-MM-DD}"
  time: "{HH:MM}"
  price: 0.00
  shares: 0
  value: 0.00
  order_type: "market|limit|stop"

  thesis:
    summary: ""
    catalyst: ""
    timeframe: ""
    confidence_pct: 0

  entry_notes: ""

# ============================================================
# PSYCHOLOGICAL STATE (Enhanced) - v2.1
# ============================================================
psychological_state:
  entry:
    overall: "confident|neutral|nervous|fomo|reluctant"
    confidence_level: 0  # 1-10
    anxiety_level: 0  # 1-10
    fomo_level: 0  # 1-10
    clarity_level: 0  # 1-10

    physical_state: "well_rested|tired|stressed|distracted"
    market_state: "normal|volatile|trending|choppy"

    entry_quality_assessment: |
      {How good was the decision-making process?}

  during_trade:
    - date: "{YYYY-MM-DD}"
      emotional_state: ""
      urge_to_exit: 0  # 1-10
      urge_to_add: 0  # 1-10
      notes: ""

  exit:
    overall: "confident|neutral|nervous|relief|regret|frustration"
    followed_plan: true
    emotional_exit: false
    emotional_exit_notes: ""

# ============================================================
# DECISION QUALITY - NEW v2.1
# ============================================================
decision_quality:
  entry:
    process_followed: true
    rushed: false
    thesis_clear: true
    alternatives_considered: false
    grade: "A|B|C|D|F"
    notes: ""

  management:
    stop_honored: true
    targets_honored: true
    plan_changed: false
    change_justified: false
    grade: "A|B|C|D|F"
    notes: ""

  exit:
    process_followed: true
    loss_aversion_check_passed: true
    emotional_decision: false
    grade: "A|B|C|D|F"
    notes: ""

  overall_grade: "A|B|C|D|F"
  grade_reasoning: ""

# ============================================================
# LOSS AVERSION CHECK (at exit) - NEW v2.1
# ============================================================
loss_aversion_check:
  applicable: false  # Only when profitable and considering exit

  thesis_intact: true
  catalyst_pending: true
  exit_reason: "logic|fear"

  pre_exit_questions:
    is_thesis_still_valid: true
    is_catalyst_still_pending: true
    am_i_exiting_due_to_fear: false
    have_i_recalculated_ev: false

  gate_result: "hold|exit_ok"
  gate_notes: ""

  # Mantra reminder
  mantra: "The catalyst justified entry; don't exit before it arrives"

# Risk Management (set at entry)
risk_management:
  stop_loss:
    initial: 0.00
    current: 0.00
    type: "hard|mental|trailing"

  targets:
    target_1: 0.00
    target_2: 0.00

  position_risk:
    risk_per_share: 0.00
    total_risk: 0.00
    portfolio_risk_pct: 0.00

# During Trade (update as needed)
updates:
  - date: "{YYYY-MM-DD}"
    price: 0.00
    note: ""
    stop_adjusted_to: null
    thesis_still_valid: true

# ============================================================
# REAL-TIME NOTES - NEW v2.1
# ============================================================
real_time_notes:
  - timestamp: "{ISO_DATETIME}"
    price: 0.00
    thought: ""
    action_taken: ""

# Partial Exits
partial_exits:
  - date: "{YYYY-MM-DD}"
    price: 0.00
    shares: 0
    reason: ""
    remaining_shares: 0
    emotional_or_planned: "planned|emotional"

# Final Exit (fill when closed)
exit:
  date: "{YYYY-MM-DD}"
  time: "{HH:MM}"
  price: 0.00
  shares: 0
  order_type: "market|limit|stop"

  reason: "target_hit|stop_hit|thesis_changed|time_stop|better_opportunity|manual|emotional"

  exit_notes: ""
  followed_plan: true

# Results (calculated on close)
result:
  gross_pnl: 0.00
  fees: 0.00
  net_pnl: 0.00
  return_pct: 0.00
  holding_days: 0

  outcome: "big_win|small_win|breakeven|small_loss|big_loss"

  # v2.1: Compare to plan
  vs_plan:
    planned_target: 0.00
    actual_exit: 0.00
    captured_pct_of_planned: 0.00
    notes: ""

# Links
_links:
  analysis: ""
  post_review: ""
  watchlist: ""
