{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "scanner-config.json",
  "title": "Scanner Configuration",
  "description": "AI agent scanner configuration for market scanning",
  "type": "object",
  "required": ["_meta", "scanner_config", "scanner", "scoring", "output"],
  "properties": {
    "_meta": {
      "type": "object",
      "required": ["id", "type", "version", "created", "status"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^SCANNER-[A-Z0-9-]+-[0-9]{3}$"
        },
        "type": {
          "type": "string",
          "const": "scanner-config"
        },
        "version": { "type": "integer", "minimum": 1 },
        "created": { "type": "string", "format": "date-time" },
        "updated": { "type": "string", "format": "date-time" },
        "status": {
          "type": "string",
          "enum": ["active", "inactive", "testing"]
        },
        "run_frequency": {
          "type": "string",
          "enum": ["daily", "intraday", "weekly"]
        },
        "last_run": { "type": ["string", "null"] }
      }
    },
    
    "scanner_config": {
      "type": "object",
      "required": ["name", "description", "category"],
      "properties": {
        "name": { "type": "string" },
        "description": { "type": "string" },
        "category": {
          "type": "string",
          "enum": ["momentum", "value", "earnings", "technical", "news", "sector"]
        },
        "priority": { "type": "integer", "minimum": 1 },
        "schedule": { "type": "object" },
        "limits": { "type": "object" }
      }
    },
    
    "scanner": {
      "type": "object",
      "required": ["source"],
      "properties": {
        "source": {
          "type": "string",
          "enum": ["ib", "web_search", "news_api", "finviz", "multi"]
        },
        "ib_scanner": { "type": "object" },
        "ib_scanner_highs": { "type": "object" },
        "ib_scanner_lows": { "type": "object" },
        "secondary_scan": { "type": "object" },
        "secondary_ib_scanner": { "type": "object" },
        "web_search": { "type": "object" },
        "news_search": { "type": "object" },
        "earnings_calendar": { "type": "object" },
        "ib_data": { "type": "object" },
        "technical_checks": { "type": "object" },
        "combination_logic": { "type": "string" }
      }
    },
    
    "quality_filters": {
      "type": "object",
      "properties": {
        "liquidity": { "type": "object" },
        "fundamentals": { "type": "object" },
        "technicals": { "type": "object" },
        "exclusions": { "type": "object" },
        "news_verification": { "type": "object" },
        "recency": { "type": "object" },
        "price_action": { "type": "object" },
        "sector_filters": { "type": "object" }
      }
    },
    
    "scoring": {
      "type": "object",
      "properties": {
        "criteria": { "type": "array" },
        "sector_scoring": { "type": "object" },
        "stock_scoring": { "type": "object" },
        "high_scoring": { "type": "object" },
        "low_scoring": { "type": "object" },
        "min_total_score": { "type": "number" },
        "min_sector_score": { "type": "number" },
        "min_stock_score": { "type": "number" },
        "auto_analyze_threshold": { "type": "number" }
      }
    },
    
    "output": {
      "type": "object",
      "required": ["format"],
      "properties": {
        "format": {
          "type": "string",
          "enum": ["watchlist", "alert", "report"]
        },
        "capture_fields": { "type": "array" },
        "report_sections": { "type": "array" },
        "storage": { "type": "object" },
        "notifications": { "type": "object" }
      }
    },
    
    "agent_instructions": {
      "type": "object",
      "properties": {
        "execution_steps": { "type": "object" },
        "decision_framework": { "type": "string" },
        "common_mistakes_to_avoid": { "type": ["array", "object"] },
        "verification_protocol": { "type": "string" },
        "fake_news_detection": { "type": "array" },
        "key_insights": { "type": "array" },
        "strategic_guidance": { "type": "array" },
        "weekly_review": { "type": "array" },
        "follow_up_actions": { "type": "object" },
        "red_flags": { "type": "array" },
        "customer_demand_check": { "type": "string" },
        "value_trap_avoidance": { "type": "string" },
        "timing_guidance": { "type": "array" }
      }
    },
    
    "gap_criteria": { "type": "object" },
    "earnings_criteria": { "type": "object" },
    "volume_criteria": { "type": "object" },
    "high_criteria": { "type": "object" },
    "low_criteria": { "type": "object" },
    "oversold_criteria": { "type": "object" },
    "bounce_probability": { "type": "object" },
    "positioning_matrix": { "type": "object" },
    "strategies": { "type": ["object", "array"] },
    "interpretation": { "type": "object" },
    "sectors": { "type": "object" },
    "rotation_analysis": { "type": "object" },
    "money_flow": { "type": "object" },
    "rotation_signals": { "type": "object" },
    "catalyst_classification": { "type": "object" },
    "news_quality": { "type": "object" },
    "web_search": { "type": "object" },
    "learning": { "type": "object" },
    
    "_graph": { "type": "object" },
    "_links": { "type": "object" }
  }
}
