# ═══════════════════════════════════════════════════════════════
# OVERSOLD BOUNCE SCANNER
# Identifies oversold conditions for mean reversion trades
# ═══════════════════════════════════════════════════════════════

_meta:
  id: SCANNER-OVERSOLD-BOUNCE-001
  type: scanner-config
  version: 1
  created: "2025-01-25T09:00:00Z"
  updated: "2025-01-25T09:00:00Z"
  status: active
  run_frequency: daily
  last_run: null
  
scanner_config:
  name: "Oversold Bounce Scanner"
  description: "Finds quality stocks at oversold extremes for bounce trades"
  category: technical
  priority: 6
  
  schedule:
    run_at: "15:50"
    run_days: [mon, tue, wed, thu, fri]
    
  limits:
    max_results: 30
    max_api_calls: 10
    timeout_seconds: 30

scanner:
  source: multi
  
  ib_scanner:
    scan_code: LOW_VS_13W_HL
    instrument: STK
    location: STK.US.MAJOR
    filters:
      above_price: 10
      below_price: 500
      above_volume: 500000

oversold_criteria:
  indicators:
    - name: "RSI(14)"
      oversold_level: 30
      extreme_level: 20
      weight: 0.30
      
    - name: "Distance from 20D MA"
      oversold_level: -10
      extreme_level: -15
      weight: 0.25
      
    - name: "Consecutive Down Days"
      oversold_level: 3
      extreme_level: 5
      weight: 0.15

bounce_probability:
  favorable_factors:
    - factor: "Multiple oversold indicators aligned"
      probability_boost: 0.15
    - factor: "Quality company (strong fundamentals)"
      probability_boost: 0.20
    - factor: "Selling on market weakness, not company-specific"
      probability_boost: 0.15
    - factor: "High volume capitulation"
      probability_boost: 0.10
    - factor: "Near major support level"
      probability_boost: 0.10
      
  unfavorable_factors:
    - factor: "Fundamental deterioration"
      probability_reduction: 0.30
    - factor: "Downtrend established"
      probability_reduction: 0.20

quality_filters:
  liquidity:
    min_avg_volume: 1000000
    min_market_cap_m: 2000
    max_spread_pct: 0.3
    
  fundamentals:
    prefer_profitable: true
    exclude_if:
      - "Earnings declining >3 quarters"
      - "Debt/equity > 2"

scoring:
  criteria:
    - name: oversold_depth
      weight: 0.25
      
    - name: quality_score
      weight: 0.30
      
    - name: support_definition
      weight: 0.20
      
    - name: catalyst_quality
      weight: 0.15
      
    - name: reversal_signals
      weight: 0.10
      
  min_total_score: 6.5
  auto_analyze_threshold: 7.5

strategies:
  aggressive_bounce:
    description: "Enter on initial bounce signal"
    entry: "On close of reversal candle"
    stop: "Below recent low"
    target: "20-day MA"
    
  conservative_bounce:
    description: "Wait for confirmation"
    entry: "After first higher low forms"
    stop: "Below swing low"
    target: "50-day MA"

output:
  format: watchlist
  capture_fields:
    - ticker
    - price
    - rsi_14
    - distance_from_20d_ma_pct
    - support_level
    - score
    - bounce_probability
    - recommended_strategy

agent_instructions:
  execution_steps:
    1: "Run IB scanner for LOW_VS_13W_HL"
    2: "Get RSI, MA distances for each"
    3: "Filter by RSI < 35"
    4: "Assess fundamental quality"
    5: "Check for reversal signals"
    6: "Score and rank results"
    
  value_trap_avoidance: |
    AVOID if: Earnings declining, guidance cut, insider selling
    FAVOR if: Market selloff, strong company, insider buying

_graph:
  entities:
    - [scanner, SCANNER-OVERSOLD-BOUNCE-001]
    - [category, technical]
  relations:
    - [this, scans_for, oversold-stocks]
